#include <stdio.h>

int
main()
{
enum estado {INICIO=1, MOVIMIENTO, UNDO, SAVE, QUIT, ERROR};

char turno;
int flagSalida=0, estado=INICIO;

while(flagSalida==0 && (turno=getchar())) {

	switch(estado){

		case INICIO: {
				if(turno=='w' || turno=='a' || turno=='d')
					estado=MOVIMIENTO;
				else if(turno=='u')
					estado=UNDO;
				else if(turno=='s')
					estado=SAVE;
				else if(turno=='q')
					estado=QUIT;
                else if(turno=='\n')
                    printf("Comando NULL\n");
				else
					estado=ERROR;
				break;
		}

		case MOVIMIENTO: {
				if(turno=='\n')	{
					printf("Hago un movimiento\n");
					flagSalida=1;
				}
				else
					estado=ERROR;
				break;
		}

		case UNDO: {
				if(turno=='\n')	{
					printf("Hago un undo\n");
					flagSalida=1;
				}
				else
					estado=ERROR;
				break;
		}

		case SAVE: {
				if(turno=='\n')	{
					printf("Entro a funcion movMatriz (quiere mover todo para abajo)\n");
					// llamada a funcion movMatriz
					flagSalida=1;
				} else if(turno=='a') {
                    if(getchar()=='v') {
                        if(getchar()=='e') {
                            if(getchar()=='\n') {
                                printf("Va a guardar la partida\n"); // llamada a funcion "Guardar"
                                estado=INICIO;
                            } else
                                estado=ERROR;
                        } else
                            estado=ERROR;
                    } else
                        estado=ERROR;
				} else
					estado=ERROR;
				break;
		}

		case QUIT: {
				if(turno=='u') {
                    if(getchar()=='i') {
                        if(getchar()=='t') {
                            if(getchar()=='\n') {
                                printf("Hago un quit\n");
                                flagSalida=1;
/* debe preguntar si quiere guardar antes de salir (llamada a la funcion "Guardar") */
                            } else
                                estado=ERROR;
                        } else
                            estado=ERROR;
                    } else
                        estado=ERROR;
				} else
					estado=ERROR;
				break;
		}

		case ERROR: {
				printf("Error\n");
				flagSalida=1;

				break;
		}
	}

}

printf("El estado es %d\n", estado);

return 0;

}
